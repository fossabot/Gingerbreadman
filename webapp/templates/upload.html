<!--
 Copyright (c) 2019 Hiroki Takemura (kekeho)
 
 This software is released under the MIT License.
 https://opensource.org/licenses/MIT
-->

{% extends "base.html" %}

{% block contents %}
<div class="container">
    <div class="row">
        <div class="col upload-form">
            <form action="/upload/" method="POST" enctype="multipart/form-data">
                {% if error %}
                    <h1>{{ error }}</h1>                
                {% endif %}
                {% csrf_token %}
                <div class="form-row">
                    <div class="col">
                        <h1 class="title">Upload Images</h1>
                        <input id="file_form" type="file" multiple="multiple" accept="image/*" name="images">
                        <input id="file_mtimes" type="hidden" name="images_mtimes" value="[]">
                    </div>
                </div>
                <div class="form-row">
                    <div class="col-lg-12">
                        <h2>Select place tag</h2>
                    </div>
                    <div class="col">
                        <select class="form-control" name="place_selected">
                            <optgroup label="Existing places">
                                {% for place in places %}
                                    <option value="{{ place.name }}">{{ place.name }} ({{ place.latitude }}, {{ place.longitude }})</option>
                                {% endfor %}
                            </optgroup>
                        </select></div>
                    <div class="col">
                    <input class="form-control" name="place_new" type="text" placeholder="or create new place tag">
                    <input type="number" name="latitude" placeholder="latitude" step="0.0000001">
                    <input type="number" name="longitude" placeholder="longitude" step="0.0000001">
                    </div>
                </div>
                <div class="form-row">
                    <div class="col"><input class="form-control" type="submit" value="Upload"></div>
                </div>
            </form>
        </div>
    </div>
</div>
<script src="/static/js/uploader.js", type="text/javascript"></script>
{% endblock contents %}
